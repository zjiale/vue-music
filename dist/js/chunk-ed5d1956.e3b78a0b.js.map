{"version":3,"sources":["webpack:///./src/components/music-list/music-list.vue?dd05","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?ab3c","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/api/rank.js","webpack:///./src/components/top-list/top-list.vue?22e8","webpack:///./src/components/top-list/top-list.vue?8e90","webpack:///src/components/top-list/top-list.vue","webpack:///./src/components/top-list/top-list.vue?cab1","webpack:///./src/components/top-list/top-list.vue","webpack:///./src/components/music-list/music-list.vue?27a3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","domProps","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","probeType","listenScroll","scroll","rank","selectItem","staticRenderFns","mixins","props","bgImage","type","String","default","Array","Boolean","data","scrollY","computed","bgStyle","created","mounted","imageHeight","$refs","clientHeight","minTranslageY","RESEVED_HEIGHT","list","$el","top","methods","handlePlaylist","bottom","refresh","pos","y","$router","selectPlay","index","randomPlay","watch","layer","transform","newY","scale","percent","zIndex","blur","Math","min","filter","backdrop","height","paddingTop","playBtn","display","components","Scroll","SongList","Loading","component","getTopList","url","Object","assign","commonParams","g_tk","format","platform","needNewCode","uin","commonInfo","commonData","Promise","resolve","reject","tryTime","request","axios","post","comm","req_0","then","response","res","code","ERR_OK","retry","Error","module","method","param","getMusicList","topid","tpl","page","jsonp","options","topList","mbFrontPicUrl","_getMusicList","topId","push","_normalizeSongs","forEach","ret","MusicList"],"mappings":"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","file":"js/chunk-ed5d1956.e3b78a0b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"probe-type\":_vm.probeType,\"listen-scroll\":_vm.listenScroll,\"data\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"rank\":_vm.rank,\"songs\":_vm.songs},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" v-show=\"songs.length>0\" ref=\"playBtn\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <scroll\r\n      @scroll=\"scroll\"\r\n      :probe-type=\"probeType\"\r\n      :listen-scroll=\"listenScroll\"\r\n      :data=\"songs\"\r\n      class=\"list\"\r\n      ref=\"list\"\r\n    >\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :rank=\"rank\" @select=\"selectItem\" :songs=\"songs\"></song-list>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!songs.length\">\r\n        <loading></loading>\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport Scroll from 'base/scroll/scroll'\r\nimport SongList from 'base/song-list/song-list'\r\nimport Loading from 'base/loading/loading'\r\nimport { prefixStyle } from 'common/js/dom'\r\nimport { mapActions } from 'vuex'\r\nimport { playlistMixin } from 'common/js/mixin'\r\n\r\nconst RESEVED_HEIGHT = 40\r\nconst transform = prefixStyle('transform')\r\nconst backdrop = prefixStyle('backdrop-filter')\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  computed: {\r\n    bgStyle () {\r\n      return `background-image:url(${this.bgImage})`\r\n    }\r\n  },\r\n  created () {\r\n    this.probeType = 3\r\n    this.listenScroll = true\r\n  },\r\n  mounted () {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight\r\n    this.minTranslageY = -this.imageHeight + RESEVED_HEIGHT\r\n    this.$refs.list.$el.style.top = `${this.$refs.bgImage.clientHeight}px`\r\n  },\r\n  methods: {\r\n    handlePlaylist (playlist) {\r\n      const bottom = playlist.length > 0 ? '60px' : ''\r\n      this.$refs.list.$el.style.bottom = bottom\r\n      this.$refs.list.refresh()\r\n    },\r\n    scroll (pos) {\r\n      this.scrollY = pos.y\r\n    },\r\n    back () {\r\n      this.$router.back()\r\n    },\r\n    selectItem (item, index) {\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index: index\r\n      })\r\n    },\r\n    random () {\r\n      this.randomPlay({\r\n        list: this.songs\r\n      })\r\n    },\r\n    ...mapActions([\r\n      'selectPlay',\r\n      'randomPlay'\r\n    ])\r\n  },\r\n  watch: {\r\n    scrollY (newY) {\r\n      let translateY = Math.max(this.minTranslageY, newY)\r\n      let zIndex = 0\r\n      let scale = 1\r\n      let blur = 0\r\n      this.$refs.layer.style[transform] = `translate3d(0, ${translateY}px, 0)`\r\n      // abs为取绝对值,该值为放大比例值\r\n      const percent = Math.abs(newY / this.imageHeight)\r\n      if (newY > 0) {\r\n        scale = 1 + percent\r\n        zIndex = 10\r\n      } else {\r\n        blur = Math.min(20 * percent, 20)\r\n      }\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`\r\n      if (newY < this.minTranslageY) {\r\n        zIndex = 10\r\n        this.$refs.bgImage.style.height = `${RESEVED_HEIGHT}px`\r\n        this.$refs.bgImage.style.paddingTop = 0\r\n        this.$refs.playBtn.style.display = 'none'\r\n      } else {\r\n        this.$refs.bgImage.style.height = 0\r\n        this.$refs.bgImage.style.paddingTop = '70%'\r\n        this.$refs.playBtn.style.display = ''\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`\r\n    }\r\n  },\r\n  components: {\r\n    Scroll,\r\n    SongList,\r\n    Loading\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n@import '~common/stylus/mixin'\r\n.music-list\r\n  position fixed\r\n  z-index 100\r\n  top 0\r\n  left 0\r\n  bottom 0\r\n  right 0\r\n  background $color-background\r\n  .back\r\n    position absolute\r\n    top 0\r\n    left 6px\r\n    z-index 50\r\n    .icon-back\r\n      display block\r\n      padding 10px\r\n      font-size $font-size-large-x\r\n      color $color-theme\r\n  .title\r\n    position absolute\r\n    top 0\r\n    left 10%\r\n    z-index 40\r\n    width 80%\r\n    no-wrap()\r\n    text-align center\r\n    line-height 40px\r\n    font-size $font-size-large\r\n    color $color-text\r\n  .bg-image\r\n    position relative\r\n    width 100%\r\n    height 0\r\n    padding-top 70%\r\n    transform-origin top\r\n    background-size cover\r\n    .play-wrapper\r\n      position absolute\r\n      bottom 20px\r\n      z-index 50\r\n      width 100%\r\n      .play\r\n        box-sizing border-box\r\n        width 135px\r\n        padding 7px 0\r\n        margin 0 auto\r\n        text-align center\r\n        border 1px solid $color-theme\r\n        color $color-theme\r\n        border-radius 100px\r\n        font-size 0\r\n        .icon-play\r\n          display inline-block\r\n          vertical-align middle\r\n          margin-right 6px\r\n          font-size $font-size-medium-x\r\n        .text\r\n          display inline-block\r\n          vertical-align middle\r\n          font-size $font-size-small\r\n    .filter\r\n      position absolute\r\n      top 0\r\n      left 0\r\n      width 100%\r\n      height 100%\r\n      background rgba(7, 17, 27, 0.4)\r\n  .bg-layer\r\n    position relative\r\n    height 100%\r\n    background $color-background\r\n  .list\r\n    position fixed\r\n    top 0\r\n    bottom 0\r\n    width 100%\r\n    background $color-background\r\n    .song-list-wrapper\r\n      padding 20px 30px\r\n    .loading-container\r\n      position absolute\r\n      width 100%\r\n      top 50%\r\n      transform translateY(-50%)\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=8f926962&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=8f926962&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f926962\",\n  null\n  \n)\n\nexport default component.exports","import {\r\n  commonParams,\r\n  options\r\n} from './config'\r\nimport axios from 'axios'\r\nimport {\r\n  ERR_OK\r\n} from 'api/config'\r\nimport jsonp from 'common/js/jsonp'\r\n\r\nexport function getTopList() {\r\n  const url = '/api/getCommonInfo'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    g_tk: 5381,\r\n    format: 'json',\r\n    platform: 'h5',\r\n    needNewCode: 1,\r\n    uin: 0\r\n  })\r\n\r\n  const commonInfo = commonData('musicToplist.ToplistInfoServer', 'GetAll', {})\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let tryTime = 3\r\n\r\n    function request() {\r\n      return axios.post(url, {\r\n        comm: data,\r\n        req_0: commonInfo\r\n      }).then((response) => {\r\n        const res = response.data\r\n        if (res.code === ERR_OK) {\r\n          resolve(res)\r\n        } else {\r\n          retry()\r\n        }\r\n      })\r\n    }\r\n\r\n    function retry() {\r\n      if (--tryTime >= 0) {\r\n        request()\r\n      } else {\r\n        reject(new Error('Can not get the songs url'))\r\n      }\r\n    }\r\n\r\n    request()\r\n  })\r\n}\r\n\r\nfunction commonData(module, method, param) {\r\n  return {\r\n    module: module,\r\n    method: method,\r\n    param: param\r\n  }\r\n}\r\n\r\nexport function getMusicList(topid) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=5251eca4&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=5251eca4&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"rank\":_vm.rank,\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :rank=\"rank\" :title=\"title\" :bgImage=\"bgImage\" :songs=\"songs\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport MusicList from 'components/music-list/music-list'\r\nimport { mapGetters } from 'vuex'\r\nimport { getMusicList } from 'api/rank'\r\nimport { createSong, isValidMusic, processSongUrl } from 'common/js/song'\r\nimport { ERR_OK } from 'api/config'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      songs: [],\r\n      rank: true\r\n    }\r\n  },\r\n  computed: {\r\n    title () {\r\n      return this.topList.title\r\n    },\r\n    bgImage () {\r\n      return this.topList.mbFrontPicUrl\r\n    },\r\n    ...mapGetters([\r\n      'topList'\r\n    ])\r\n  },\r\n  created () {\r\n    this._getMusicList()\r\n  },\r\n  methods: {\r\n    _getMusicList () {\r\n      if (!this.topList.topId) {\r\n        this.$router.push('/rank')\r\n      }\r\n      getMusicList(this.topList.topId).then((res) => {\r\n        if (res.code === ERR_OK) {\r\n          processSongUrl(this._normalizeSongs(res.songlist)).then((songs) => {\r\n            this.songs = songs\r\n          })\r\n        }\r\n      })\r\n    },\r\n    _normalizeSongs (list) {\r\n      let ret = []\r\n      list.forEach((item) => {\r\n        const musicData = item.data\r\n        if (isValidMusic(musicData)) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n  },\r\n  components: {\r\n    MusicList\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n.slide-enter-active, .slide-leave-active\r\n  transition all 0.3s ease\r\n.slide-enter, .slide-leave-to\r\n  transform translate3d(100%, 0, 0)\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./top-list.vue?vue&type=template&id=5251eca4&scoped=true&\"\nimport script from \"./top-list.vue?vue&type=script&lang=js&\"\nexport * from \"./top-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./top-list.vue?vue&type=style&index=0&id=5251eca4&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5251eca4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=8f926962&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=8f926962&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\""],"sourceRoot":""}