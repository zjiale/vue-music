{"remainingRequest":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\components\\playlist\\playlist.vue?vue&type=style&index=0&id=49f7be0f&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&","dependencies":[{"path":"E:\\vue-music\\src\\components\\playlist\\playlist.vue","mtime":1571823463165},{"path":"E:\\vue-music\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '~common/stylus/variable'\r\n@import '~common/stylus/mixin'\r\n.playlist\r\n  position fixed\r\n  left 0\r\n  right 0\r\n  top 0\r\n  bottom 0\r\n  z-index 200\r\n  background-color $color-background-d\r\n  &.list-fade-enter-active, &.list-fade-leave-active\r\n    transition opacity 0.3s\r\n    .list-wrapper\r\n      transition all 0.3s\r\n  &.list-fade-enter, &.list-fade-leave-to\r\n    opacity 0\r\n    .list-wrapper\r\n      transform translate3d(0, 100%, 0)\r\n  &.list-fade-enter, .list-wrapper\r\n    position absolute\r\n    left 0\r\n    bottom 0\r\n    width 100%\r\n    background-color $color-highlight-background\r\n    .list-header\r\n      position relative\r\n      padding 20px 30px 10px 20px\r\n      .title\r\n        display flex\r\n        align-items center\r\n        .icon\r\n          margin-right 10px\r\n          font-size 30px\r\n          color $color-theme-d\r\n        .text\r\n          flex 1\r\n          font-size $font-size-medium\r\n          color $color-text-l\r\n        .clear\r\n          extend-click()\r\n          .icon-clear\r\n            font-size $font-size-medium\r\n            color $color-text-d\r\n    .list-content\r\n      max-height 240px\r\n      overflow hidden\r\n      .item\r\n        display flex\r\n        align-items center\r\n        height 40px\r\n        padding 0 30px 0 20px\r\n        overflow hidden\r\n        &.list-enter-active, &.list-leave-active\r\n          transition all 0.1s\r\n        &.list-enter, &.list-leave-to\r\n          height 0\r\n        .current\r\n          flex 0 0 20px\r\n          width 20px\r\n          font-size $font-size-small\r\n          color $color-theme-d\r\n        .text\r\n          flex 1\r\n          no-wrap()\r\n          font-size $font-size-medium\r\n          color $color-text-d\r\n        .like\r\n          extend-click()\r\n          margin-right 15px\r\n          font-size $font-size-small\r\n          color $color-theme\r\n          .icon-favorite\r\n            color $color-sub-theme\r\n        .delete\r\n          extend-click()\r\n          font-size $font-size-small\r\n          color $color-theme\r\n    .list-operate\r\n      width 140px\r\n      margin 20px auto 30px auto\r\n      .add\r\n        display flex\r\n        align-items center\r\n        padding 8px 16px\r\n        border 1px solid $color-text-l\r\n        border-radius 100px\r\n        color $color-text-l\r\n        .icon-add\r\n          margin-right 5px\r\n          font-size $font-size-small-s\r\n        .text\r\n          font-size $font-size-small\r\n    .list-close\r\n      text-align center\r\n      line-height 50px\r\n      background $color-background\r\n      font-size $font-size-medium-x\r\n      color $color-text-l\r\n",{"version":3,"sources":["playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"playlist.vue","sourceRoot":"src/components/playlist","sourcesContent":["<template>\r\n  <transition name=\"list-fade\">\r\n    <div class=\"playlist\" v-show=\"showFlag\" @click=\"hide\">\r\n      <div class=\"list-wrapper\" @click.stop>\r\n        <div class=\"list-header\">\r\n          <h1 class=\"title\">\r\n            <i class=\"icon\" :class=\"iconMode\" @click=\"changeMode\"></i>\r\n            <span class=\"text\">{{modeText}}</span>\r\n            <span class=\"clear\" @click=\"showConfirm\">\r\n              <i class=\"icon-clear\"></i>\r\n            </span>\r\n          </h1>\r\n        </div>\r\n        <scroll\r\n          ref=\"listContent\"\r\n          :refreshDelay=\"refreshDelay\"\r\n          :data=\"sequenceList\"\r\n          class=\"list-content\"\r\n        >\r\n          <transition-group name=\"list\" tag=\"ul\">\r\n            <li\r\n              :key=\"item.id\"\r\n              ref=\"listItem\"\r\n              class=\"item\"\r\n              v-for=\"(item,index) in sequenceList\"\r\n              @click=\"selectItem(item,index)\"\r\n            >\r\n              <i class=\"current\" :class=\"getCurrentIcon(item)\"></i>\r\n              <span class=\"text\">{{item.name}}</span>\r\n              <span @click.stop=\"toggleFavorite(item)\" class=\"like\">\r\n                <i :class=\"getFavoriteIcon(item)\"></i>\r\n              </span>\r\n              <span class=\"delete\" @click.stop=\"deleteOne(item)\">\r\n                <i class=\"icon-delete\"></i>\r\n              </span>\r\n            </li>\r\n          </transition-group>\r\n        </scroll>\r\n        <div class=\"list-operate\">\r\n          <div class=\"add\" @click=\"addSong\">\r\n            <i class=\"icon-add\"></i>\r\n            <span class=\"text\">添加歌曲到队列</span>\r\n          </div>\r\n        </div>\r\n        <div @click=\"hide\" class=\"list-close\">\r\n          <span>关闭</span>\r\n        </div>\r\n      </div>\r\n      <confirm ref=\"confirm\" @confirm=\"confirmClear\" text=\"是否清空播放列表\" confirmBtnText=\"清空\"></confirm>\r\n      <add-song ref=\"addSong\"></add-song>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { mapActions } from 'vuex'\r\nimport { playMode } from 'common/js/config'\r\nimport Scroll from 'base/scroll/scroll'\r\nimport Confirm from 'base/confirm/confirm'\r\nimport { playerMixin } from 'common/js/mixin'\r\nimport AddSong from 'components/add-song/add-song'\r\n\r\nexport default {\r\n  mixins: [playerMixin],\r\n  data () {\r\n    return {\r\n      showFlag: false,\r\n      refreshDelay: 100\r\n    }\r\n  },\r\n  computed: {\r\n    modeText () {\r\n      return this.mode === playMode.sequence ? '顺序播放' : this.mode === playMode.random ? '随机播放' : '单曲循环'\r\n    }\r\n  },\r\n  methods: {\r\n    show () {\r\n      this.showFlag = true\r\n      setTimeout(() => {\r\n        this.$refs.listContent.refresh()\r\n        this.scrollToCurrent(this.currentSong)\r\n      }, 20)\r\n    },\r\n    hide () {\r\n      this.showFlag = false\r\n    },\r\n    getCurrentIcon (item) {\r\n      if (this.currentSong.id === item.id) {\r\n        return 'icon-play'\r\n      }\r\n      return ''\r\n    },\r\n    selectItem (item, index) {\r\n      if (this.mode === playMode.random) {\r\n        index = this.playlist.findIndex((song) => {\r\n          return song.id === item.id\r\n        })\r\n      }\r\n      this.setCurrentIndex(index)\r\n      this.setPlayingState(true)\r\n    },\r\n    scrollToCurrent (current) {\r\n      const index = this.sequenceList.findIndex((song) => {\r\n        return current.id === song.id\r\n      })\r\n      this.$refs.listContent.scrollToElement(this.$refs.listItem[index], 300)\r\n    },\r\n    deleteOne (item) {\r\n      this.deleteSong(item)\r\n      if (!this.playlist.length) {\r\n        this.hide()\r\n      }\r\n    },\r\n    showConfirm () {\r\n      this.$refs.confirm.show()\r\n    },\r\n    confirmClear () {\r\n      this.deleteSongList()\r\n      this.hide()\r\n    },\r\n    addSong () {\r\n      this.$refs.addSong.show()\r\n    },\r\n    ...mapActions([\r\n      'deleteSong',\r\n      'deleteSongList'\r\n    ])\r\n  },\r\n  watch: {\r\n    currentSong (newSong, oldSong) {\r\n      if (!this.showFlag || newSong.id === oldSong.id) {\r\n        return\r\n      }\r\n      this.scrollToCurrent(newSong)\r\n    }\r\n  },\r\n  components: {\r\n    Scroll,\r\n    Confirm,\r\n    AddSong\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n@import '~common/stylus/mixin'\r\n.playlist\r\n  position fixed\r\n  left 0\r\n  right 0\r\n  top 0\r\n  bottom 0\r\n  z-index 200\r\n  background-color $color-background-d\r\n  &.list-fade-enter-active, &.list-fade-leave-active\r\n    transition opacity 0.3s\r\n    .list-wrapper\r\n      transition all 0.3s\r\n  &.list-fade-enter, &.list-fade-leave-to\r\n    opacity 0\r\n    .list-wrapper\r\n      transform translate3d(0, 100%, 0)\r\n  &.list-fade-enter, .list-wrapper\r\n    position absolute\r\n    left 0\r\n    bottom 0\r\n    width 100%\r\n    background-color $color-highlight-background\r\n    .list-header\r\n      position relative\r\n      padding 20px 30px 10px 20px\r\n      .title\r\n        display flex\r\n        align-items center\r\n        .icon\r\n          margin-right 10px\r\n          font-size 30px\r\n          color $color-theme-d\r\n        .text\r\n          flex 1\r\n          font-size $font-size-medium\r\n          color $color-text-l\r\n        .clear\r\n          extend-click()\r\n          .icon-clear\r\n            font-size $font-size-medium\r\n            color $color-text-d\r\n    .list-content\r\n      max-height 240px\r\n      overflow hidden\r\n      .item\r\n        display flex\r\n        align-items center\r\n        height 40px\r\n        padding 0 30px 0 20px\r\n        overflow hidden\r\n        &.list-enter-active, &.list-leave-active\r\n          transition all 0.1s\r\n        &.list-enter, &.list-leave-to\r\n          height 0\r\n        .current\r\n          flex 0 0 20px\r\n          width 20px\r\n          font-size $font-size-small\r\n          color $color-theme-d\r\n        .text\r\n          flex 1\r\n          no-wrap()\r\n          font-size $font-size-medium\r\n          color $color-text-d\r\n        .like\r\n          extend-click()\r\n          margin-right 15px\r\n          font-size $font-size-small\r\n          color $color-theme\r\n          .icon-favorite\r\n            color $color-sub-theme\r\n        .delete\r\n          extend-click()\r\n          font-size $font-size-small\r\n          color $color-theme\r\n    .list-operate\r\n      width 140px\r\n      margin 20px auto 30px auto\r\n      .add\r\n        display flex\r\n        align-items center\r\n        padding 8px 16px\r\n        border 1px solid $color-text-l\r\n        border-radius 100px\r\n        color $color-text-l\r\n        .icon-add\r\n          margin-right 5px\r\n          font-size $font-size-small-s\r\n        .text\r\n          font-size $font-size-small\r\n    .list-close\r\n      text-align center\r\n      line-height 50px\r\n      background $color-background\r\n      font-size $font-size-medium-x\r\n      color $color-text-l\r\n</style>"]}]}