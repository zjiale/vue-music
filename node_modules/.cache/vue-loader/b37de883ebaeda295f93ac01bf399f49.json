{"remainingRequest":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\base\\slider\\slider.vue?vue&type=style&index=0&id=440d73ac&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&","dependencies":[{"path":"E:\\vue-music\\src\\base\\slider\\slider.vue","mtime":1565168980300},{"path":"E:\\vue-music\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '~common/stylus/variable'\r\n\r\n.slider {\r\n  min-height: 1px\r\n\r\n  .slider-group {\r\n    position: relative\r\n    overflow: hidden\r\n    white-space: nowrap\r\n\r\n    .slider-item {\r\n      float: left\r\n      box-sizing: border-box\r\n      overflow: hidden\r\n      text-align: center\r\n\r\n      a {\r\n        display: block\r\n        width: 100%\r\n        overflow: hidden\r\n        text-decoration: none\r\n      }\r\n\r\n      img {\r\n        display: block\r\n        width: 100%\r\n      }\r\n    }\r\n  }\r\n\r\n  .dots {\r\n    position: absolute\r\n    right: 0\r\n    left: 0\r\n    bottom: 12px\r\n    text-align: center\r\n    font-size: 0\r\n\r\n    .dot {\r\n      display: inline-block\r\n      margin: 0 4px\r\n      width: 8px\r\n      height: 8px\r\n      border-radius: 50%\r\n      background: $color-text-l\r\n\r\n      &.active {\r\n        width: 20px\r\n        border-radius: 5px\r\n        background: $color-text-ll\r\n      }\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["slider.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slider.vue","sourceRoot":"src/base/slider","sourcesContent":["<template>\r\n  <div class=\"slider\" ref=\"slider\">\r\n    <div class=\"slider-group\" ref=\"sliderGroup\">\r\n      <slot></slot>\r\n    </div>\r\n    <div class=\"dots\">\r\n      <span\r\n        class=\"dot\"\r\n        v-for=\"(item,index) in dots\"\r\n        :key=\"index\"\r\n        :class=\"{active: currentPageIndex === index}\"\r\n      ></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport BScroll from 'better-scroll'\r\nimport { addClass } from 'common/js/dom'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dots: [],\r\n      currentPageIndex: 0,\r\n      playTimer: 0\r\n    }\r\n  },\r\n  props: {\r\n    loop: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    autoPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 4000\r\n    }\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this._setSliderWidth()\r\n      this._initDots()\r\n      this._initSlider()\r\n    }, 20)\r\n\r\n    // resize窗口改变事件\r\n    window.addEventListener('resize', () => {\r\n      if (!this.slider) {\r\n        return\r\n      }\r\n      this._setSliderWidth(true)\r\n      this.slider.refresh()\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.playTimer)\r\n    this.slider.destroy()\r\n  },\r\n  methods: {\r\n    _setSliderWidth(isResize) {\r\n      this.children = this.$refs.sliderGroup.children\r\n\r\n      let width = 0\r\n      let sliderWidth = this.$refs.slider.clientWidth\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        let child = this.children[i]\r\n        addClass(child, 'slider-item')\r\n\r\n        child.style.width = sliderWidth + 'px'\r\n        width += sliderWidth\r\n      }\r\n      if (this.loop && !isResize) {\r\n        width += 2 * sliderWidth\r\n      }\r\n      this.$refs.sliderGroup.style.width = width + 'px'\r\n    },\r\n    _initDots() {\r\n      this.dots = new Array(this.children.length)\r\n    },\r\n    _initSlider() {\r\n      clearTimeout(this.playTimer)\r\n      this.slider = new BScroll(this.$refs.slider, {\r\n        scrollX: true,\r\n        scrollY: false,\r\n        momentum: false,\r\n        // 需要安装better-scroll 2.0的slide插件\r\n        slide: {\r\n          loop: this.loop,\r\n          threshold: 0.3\r\n        },\r\n        click: true,\r\n        bounce: false,\r\n        stopPropagation: true,\r\n        probeType: 2\r\n      })\r\n      this.slider.on('scrollEnd', this._onScrollEnd)\r\n\r\n      this.slider.on('slideWillChange', (page) => {\r\n        this.currentPageIndex = page.pageX\r\n      })\r\n      this.autoGoNext()\r\n    },\r\n    nextPage() {\r\n      this.slider.next()\r\n    },\r\n    _onScrollEnd() {\r\n      this.autoGoNext()\r\n    },\r\n    autoGoNext() {\r\n      clearTimeout(this.playTimer)\r\n      this.playTimer = setTimeout(() => {\r\n        this.nextPage()\r\n      }, 4000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n\r\n.slider {\r\n  min-height: 1px\r\n\r\n  .slider-group {\r\n    position: relative\r\n    overflow: hidden\r\n    white-space: nowrap\r\n\r\n    .slider-item {\r\n      float: left\r\n      box-sizing: border-box\r\n      overflow: hidden\r\n      text-align: center\r\n\r\n      a {\r\n        display: block\r\n        width: 100%\r\n        overflow: hidden\r\n        text-decoration: none\r\n      }\r\n\r\n      img {\r\n        display: block\r\n        width: 100%\r\n      }\r\n    }\r\n  }\r\n\r\n  .dots {\r\n    position: absolute\r\n    right: 0\r\n    left: 0\r\n    bottom: 12px\r\n    text-align: center\r\n    font-size: 0\r\n\r\n    .dot {\r\n      display: inline-block\r\n      margin: 0 4px\r\n      width: 8px\r\n      height: 8px\r\n      border-radius: 50%\r\n      background: $color-text-l\r\n\r\n      &.active {\r\n        width: 20px\r\n        border-radius: 5px\r\n        background: $color-text-ll\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}