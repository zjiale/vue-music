{"remainingRequest":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\components\\music-video\\music-video.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-music\\src\\components\\music-video\\music-video.vue","mtime":1572581076448},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getMvList, getMvUrl } from 'api/mv';\nimport { createMv } from 'common/js/mv';\nimport BaseVideo from 'base/base-video/base-video';\nimport Scroll from 'base/scroll/scroll';\nexport default {\n  data: function data() {\n    return {\n      mvList: []\n    };\n  },\n  created: function created() {\n    console.log(window.innerHeight);\n\n    this._getMvList();\n  },\n  methods: {\n    _getMvList: function _getMvList() {\n      var _this = this;\n\n      getMvList().then(function (res) {\n        var list = res.data.mv.list;\n        getMvUrl(list).then(function (res) {\n          _this.mvList = _this._normalizeMv(list, res);\n        });\n      });\n    },\n    // list为mv相关的信息，res为mv的地址和vid信息\n    _normalizeMv: function _normalizeMv(list, res) {\n      var ret = [];\n      var result = [];\n      var mvList = [];\n      var vkeys = res.getMvUrl.data;\n\n      for (var key in vkeys) {\n        ret.push({\n          vid: key,\n          url: vkeys[key].mp4[1].freeflow_url[0]\n        });\n      }\n\n      list.forEach(function (item) {\n        ret.forEach(function (res) {\n          if (item.v_id === res.vid) {\n            result.push({\n              mv_id: item.mv_id,\n              mv_name: item.mv_name,\n              mv_pic_url: item.mv_pic_url,\n              singer_name: item.singer_name,\n              singerMID: item.singerMID,\n              v_id: item.v_id,\n              url: res.url\n            });\n          }\n        });\n      });\n      result.forEach(function (item) {\n        mvList.push(createMv(item));\n      });\n      return mvList;\n    },\n    _calculateHeight: function _calculateHeight() {\n      var item = this.$refs.item;\n\n      for (var i = 0; i < item.length; i++) {\n        var mv = item[i];\n        console.log(mv.offsetHeight + ' ' + mv.offsetWidth);\n      }\n    }\n  },\n  watch: {\n    // 异步加载的数据需要在watch观察数据然后再进行dom操作\n    mvList: function mvList() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        _this2._calculateHeight();\n      }, 20);\n    }\n  },\n  components: {\n    BaseVideo: BaseVideo,\n    Scroll: Scroll\n  }\n};",{"version":3,"sources":["music-video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA,SAAA,SAAA,EAAA,QAAA,QAAA,QAAA;AACA,SAAA,QAAA,QAAA,cAAA;AACA,OAAA,SAAA,MAAA,4BAAA;AACA,OAAA,MAAA,MAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OANA,qBAMA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,WAAA;;AACA,SAAA,UAAA;AACA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,MAAA,SAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAAA,YACA,IADA,GACA,GAAA,CAAA,IAAA,CAAA,EADA,CACA,IADA;AAEA,QAAA,QAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,YAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AACA,SAFA;AAGA,OALA;AAMA,KARA;AASA;AACA,IAAA,YAVA,wBAUA,IAVA,EAUA,GAVA,EAUA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,WAAA,IAAA,GAAA,IAAA,KAAA,EAAA;AACA,QAAA,GAAA,CAAA,IAAA,CAAA;AACA,UAAA,GAAA,EAAA,GADA;AAEA,UAAA,GAAA,EAAA,KAAA,CAAA,GAAA,CAAA,CAAA,GAAA,CAAA,CAAA,EAAA,YAAA,CAAA,CAAA;AAFA,SAAA;AAIA;;AACA,MAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,GAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,IAAA,CAAA,IAAA,KAAA,GAAA,CAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA;AACA,cAAA,KAAA,EAAA,IAAA,CAAA,KADA;AAEA,cAAA,OAAA,EAAA,IAAA,CAAA,OAFA;AAGA,cAAA,UAAA,EAAA,IAAA,CAAA,UAHA;AAIA,cAAA,WAAA,EAAA,IAAA,CAAA,WAJA;AAKA,cAAA,SAAA,EAAA,IAAA,CAAA,SALA;AAMA,cAAA,IAAA,EAAA,IAAA,CAAA,IANA;AAOA,cAAA,GAAA,EAAA,GAAA,CAAA;AAPA,aAAA;AASA;AACA,SAZA;AAaA,OAdA;AAeA,MAAA,MAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AACA,OAFA;AAGA,aAAA,MAAA;AACA,KAxCA;AAyCA,IAAA,gBAzCA,8BAyCA;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,EAAA,GAAA,IAAA,CAAA,CAAA,CAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,EAAA,CAAA,YAAA,GAAA,GAAA,GAAA,EAAA,CAAA,WAAA;AACA;AACA;AA/CA,GAVA;AA2DA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,MAFA,oBAEA;AAAA;;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,gBAAA;AACA,OAFA,EAEA,EAFA,CAAA;AAGA;AANA,GA3DA;AAmEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,MAAA,EAAA;AAFA;AAnEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"video-cotent\">\r\n    <scroll class=\"video-list\" :data=\"mvList\">\r\n      <ul>\r\n        <li class=\"item\" ref=\"item\" v-for=\"item in mvList\" :key=\"item.vid\">\r\n          <base-video :vid=\"item.vid\" :src=\"item.url\" :poster=\"item.image\"></base-video>\r\n          <div class=\"video-info\">\r\n            <div class=\"singer\">\r\n              <img class=\"avatar\" v-lazy=\"item.avatar\" />\r\n              <span class=\"name\" v-html=\"item.singer\"></span>\r\n            </div>\r\n            <span class=\"song\" v-html=\"item.name\"></span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { getMvList, getMvUrl } from 'api/mv'\r\nimport { createMv } from 'common/js/mv'\r\nimport BaseVideo from 'base/base-video/base-video'\r\nimport Scroll from 'base/scroll/scroll'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      mvList: []\r\n    }\r\n  },\r\n  created () {\r\n    console.log(window.innerHeight)\r\n    this._getMvList()\r\n  },\r\n  methods: {\r\n    _getMvList () {\r\n      getMvList().then((res) => {\r\n        let { list } = res.data.mv\r\n        getMvUrl(list).then((res) => {\r\n          this.mvList = this._normalizeMv(list, res)\r\n        })\r\n      })\r\n    },\r\n    // list为mv相关的信息，res为mv的地址和vid信息\r\n    _normalizeMv (list, res) {\r\n      let ret = []\r\n      let result = []\r\n      let mvList = []\r\n      let vkeys = res.getMvUrl.data\r\n      for (var key in vkeys) {\r\n        ret.push({\r\n          vid: key,\r\n          url: vkeys[key].mp4[1].freeflow_url[0]\r\n        })\r\n      }\r\n      list.forEach((item) => {\r\n        ret.forEach((res) => {\r\n          if (item.v_id === res.vid) {\r\n            result.push({\r\n              mv_id: item.mv_id,\r\n              mv_name: item.mv_name,\r\n              mv_pic_url: item.mv_pic_url,\r\n              singer_name: item.singer_name,\r\n              singerMID: item.singerMID,\r\n              v_id: item.v_id,\r\n              url: res.url\r\n            })\r\n          }\r\n        })\r\n      })\r\n      result.forEach((item) => {\r\n        mvList.push(createMv(item))\r\n      })\r\n      return mvList\r\n    },\r\n    _calculateHeight () {\r\n      const item = this.$refs.item\r\n      for (let i = 0; i < item.length; i++) {\r\n        let mv = item[i]\r\n        console.log(mv.offsetHeight + ' ' + mv.offsetWidth)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    // 异步加载的数据需要在watch观察数据然后再进行dom操作\r\n    mvList () {\r\n      setTimeout(() => {\r\n        this._calculateHeight()\r\n      }, 20)\r\n    }\r\n  },\r\n  components: {\r\n    BaseVideo,\r\n    Scroll\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n.video-cotent\r\n  position fixed\r\n  width 100%\r\n  top 88px\r\n  bottom 0\r\n  .video-list\r\n    height 100%\r\n    overflow hidden\r\n    .item\r\n      display flex\r\n      flex-direction column\r\n      padding-top 15px\r\n      &:last-child\r\n        padding-bottom 10px\r\n      .video-info\r\n        display flex\r\n        justify-content space-between\r\n        align-items center\r\n        margin-top 8px\r\n        padding 0 10px\r\n        font-size $font-size-medium\r\n        color $color-theme\r\n        .singer\r\n          display flex\r\n          align-items center\r\n          .avatar\r\n            width 28px\r\n            height 28px\r\n            border-radius 50%\r\n            margin-right 5px\r\n</style>"],"sourceRoot":"src/components/music-video"}]}