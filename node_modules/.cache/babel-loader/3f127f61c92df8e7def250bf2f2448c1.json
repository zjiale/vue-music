{"remainingRequest":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js!E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\base\\slider\\slider.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-music\\src\\base\\slider\\slider.vue","mtime":1565168980300},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BScroll from 'better-scroll';\nimport { addClass } from 'common/js/dom';\nexport default {\n  data: function data() {\n    return {\n      dots: [],\n      currentPageIndex: 0,\n      playTimer: 0\n    };\n  },\n  props: {\n    loop: {\n      type: Boolean,\n      default: true\n    },\n    autoPlay: {\n      type: Boolean,\n      default: true\n    },\n    interval: {\n      type: Number,\n      default: 4000\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function () {\n      _this._setSliderWidth();\n\n      _this._initDots();\n\n      _this._initSlider();\n    }, 20); // resize窗口改变事件\n\n    window.addEventListener('resize', function () {\n      if (!_this.slider) {\n        return;\n      }\n\n      _this._setSliderWidth(true);\n\n      _this.slider.refresh();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.playTimer);\n    this.slider.destroy();\n  },\n  methods: {\n    _setSliderWidth: function _setSliderWidth(isResize) {\n      this.children = this.$refs.sliderGroup.children;\n      var width = 0;\n      var sliderWidth = this.$refs.slider.clientWidth;\n\n      for (var i = 0; i < this.children.length; i++) {\n        var child = this.children[i];\n        addClass(child, 'slider-item');\n        child.style.width = sliderWidth + 'px';\n        width += sliderWidth;\n      }\n\n      if (this.loop && !isResize) {\n        width += 2 * sliderWidth;\n      }\n\n      this.$refs.sliderGroup.style.width = width + 'px';\n    },\n    _initDots: function _initDots() {\n      this.dots = new Array(this.children.length);\n    },\n    _initSlider: function _initSlider() {\n      var _this2 = this;\n\n      clearTimeout(this.playTimer);\n      this.slider = new BScroll(this.$refs.slider, {\n        scrollX: true,\n        scrollY: false,\n        momentum: false,\n        // 需要安装better-scroll 2.0的slide插件\n        slide: {\n          loop: this.loop,\n          threshold: 0.3\n        },\n        click: true,\n        bounce: false,\n        stopPropagation: true,\n        probeType: 2\n      });\n      this.slider.on('scrollEnd', this._onScrollEnd);\n      this.slider.on('slideWillChange', function (page) {\n        _this2.currentPageIndex = page.pageX;\n      });\n      this.autoGoNext();\n    },\n    nextPage: function nextPage() {\n      this.slider.next();\n    },\n    _onScrollEnd: function _onScrollEnd() {\n      this.autoGoNext();\n    },\n    autoGoNext: function autoGoNext() {\n      var _this3 = this;\n\n      clearTimeout(this.playTimer);\n      this.playTimer = setTimeout(function () {\n        _this3.nextPage();\n      }, 4000);\n    }\n  }\n};",{"version":3,"sources":["slider.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"slider\" ref=\"slider\">\r\n    <div class=\"slider-group\" ref=\"sliderGroup\">\r\n      <slot></slot>\r\n    </div>\r\n    <div class=\"dots\">\r\n      <span\r\n        class=\"dot\"\r\n        v-for=\"(item,index) in dots\"\r\n        :key=\"index\"\r\n        :class=\"{active: currentPageIndex === index}\"\r\n      ></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport BScroll from 'better-scroll'\r\nimport { addClass } from 'common/js/dom'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dots: [],\r\n      currentPageIndex: 0,\r\n      playTimer: 0\r\n    }\r\n  },\r\n  props: {\r\n    loop: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    autoPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 4000\r\n    }\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this._setSliderWidth()\r\n      this._initDots()\r\n      this._initSlider()\r\n    }, 20)\r\n\r\n    // resize窗口改变事件\r\n    window.addEventListener('resize', () => {\r\n      if (!this.slider) {\r\n        return\r\n      }\r\n      this._setSliderWidth(true)\r\n      this.slider.refresh()\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.playTimer)\r\n    this.slider.destroy()\r\n  },\r\n  methods: {\r\n    _setSliderWidth(isResize) {\r\n      this.children = this.$refs.sliderGroup.children\r\n\r\n      let width = 0\r\n      let sliderWidth = this.$refs.slider.clientWidth\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        let child = this.children[i]\r\n        addClass(child, 'slider-item')\r\n\r\n        child.style.width = sliderWidth + 'px'\r\n        width += sliderWidth\r\n      }\r\n      if (this.loop && !isResize) {\r\n        width += 2 * sliderWidth\r\n      }\r\n      this.$refs.sliderGroup.style.width = width + 'px'\r\n    },\r\n    _initDots() {\r\n      this.dots = new Array(this.children.length)\r\n    },\r\n    _initSlider() {\r\n      clearTimeout(this.playTimer)\r\n      this.slider = new BScroll(this.$refs.slider, {\r\n        scrollX: true,\r\n        scrollY: false,\r\n        momentum: false,\r\n        // 需要安装better-scroll 2.0的slide插件\r\n        slide: {\r\n          loop: this.loop,\r\n          threshold: 0.3\r\n        },\r\n        click: true,\r\n        bounce: false,\r\n        stopPropagation: true,\r\n        probeType: 2\r\n      })\r\n      this.slider.on('scrollEnd', this._onScrollEnd)\r\n\r\n      this.slider.on('slideWillChange', (page) => {\r\n        this.currentPageIndex = page.pageX\r\n      })\r\n      this.autoGoNext()\r\n    },\r\n    nextPage() {\r\n      this.slider.next()\r\n    },\r\n    _onScrollEnd() {\r\n      this.autoGoNext()\r\n    },\r\n    autoGoNext() {\r\n      clearTimeout(this.playTimer)\r\n      this.playTimer = setTimeout(() => {\r\n        this.nextPage()\r\n      }, 4000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n\r\n.slider {\r\n  min-height: 1px\r\n\r\n  .slider-group {\r\n    position: relative\r\n    overflow: hidden\r\n    white-space: nowrap\r\n\r\n    .slider-item {\r\n      float: left\r\n      box-sizing: border-box\r\n      overflow: hidden\r\n      text-align: center\r\n\r\n      a {\r\n        display: block\r\n        width: 100%\r\n        overflow: hidden\r\n        text-decoration: none\r\n      }\r\n\r\n      img {\r\n        display: block\r\n        width: 100%\r\n      }\r\n    }\r\n  }\r\n\r\n  .dots {\r\n    position: absolute\r\n    right: 0\r\n    left: 0\r\n    bottom: 12px\r\n    text-align: center\r\n    font-size: 0\r\n\r\n    .dot {\r\n      display: inline-block\r\n      margin: 0 4px\r\n      width: 8px\r\n      height: 8px\r\n      border-radius: 50%\r\n      background: $color-text-l\r\n\r\n      &.active {\r\n        width: 20px\r\n        border-radius: 5px\r\n        background: $color-text-ll\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/base/slider"}]}