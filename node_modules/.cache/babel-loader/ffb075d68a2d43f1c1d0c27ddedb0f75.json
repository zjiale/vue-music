{"remainingRequest":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\components\\music-list\\music-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-music\\src\\components\\music-list\\music-list.vue","mtime":1571198573491},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"E:\\\\vue-music\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Scroll from 'base/scroll/scroll';\nimport SongList from 'base/song-list/song-list';\nimport Loading from 'base/loading/loading';\nimport { prefixStyle } from 'common/js/dom';\nimport { mapActions } from 'vuex';\nimport { playlistMixin } from 'common/js/mixin';\nvar RESEVED_HEIGHT = 40;\nvar transform = prefixStyle('transform');\nvar backdrop = prefixStyle('backdrop-filter');\nexport default {\n  mixins: [playlistMixin],\n  props: {\n    bgImage: {\n      type: String,\n      default: ''\n    },\n    songs: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    rank: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      scrollY: 0\n    };\n  },\n  computed: {\n    bgStyle: function bgStyle() {\n      return \"background-image:url(\".concat(this.bgImage, \")\");\n    }\n  },\n  created: function created() {\n    this.probeType = 3;\n    this.listenScroll = true;\n  },\n  mounted: function mounted() {\n    this.imageHeight = this.$refs.bgImage.clientHeight;\n    this.minTranslageY = -this.imageHeight + RESEVED_HEIGHT;\n    this.$refs.list.$el.style.top = \"\".concat(this.$refs.bgImage.clientHeight, \"px\");\n  },\n  methods: _objectSpread({\n    handlePlaylist: function handlePlaylist(playlist) {\n      var bottom = playlist.length > 0 ? '60px' : '';\n      this.$refs.list.$el.style.bottom = bottom;\n      this.$refs.list.refresh();\n    },\n    scroll: function scroll(pos) {\n      this.scrollY = pos.y;\n    },\n    back: function back() {\n      this.$router.back();\n    },\n    selectItem: function selectItem(item, index) {\n      this.selectPlay({\n        list: this.songs,\n        index: index\n      });\n    },\n    random: function random() {\n      this.randomPlay({\n        list: this.songs\n      });\n    }\n  }, mapActions(['selectPlay', 'randomPlay'])),\n  watch: {\n    scrollY: function scrollY(newY) {\n      var translateY = Math.max(this.minTranslageY, newY);\n      var zIndex = 0;\n      var scale = 1;\n      var blur = 0;\n      this.$refs.layer.style[transform] = \"translate3d(0, \".concat(translateY, \"px, 0)\"); // abs为取绝对值,该值为放大比例值\n\n      var percent = Math.abs(newY / this.imageHeight);\n\n      if (newY > 0) {\n        scale = 1 + percent;\n        zIndex = 10;\n      } else {\n        blur = Math.min(20 * percent, 20);\n      }\n\n      this.$refs.filter.style[backdrop] = \"blur(\".concat(blur, \"px)\");\n\n      if (newY < this.minTranslageY) {\n        zIndex = 10;\n        this.$refs.bgImage.style.height = \"\".concat(RESEVED_HEIGHT, \"px\");\n        this.$refs.bgImage.style.paddingTop = 0;\n        this.$refs.playBtn.style.display = 'none';\n      } else {\n        this.$refs.bgImage.style.height = 0;\n        this.$refs.bgImage.style.paddingTop = '70%';\n        this.$refs.playBtn.style.display = '';\n      }\n\n      this.$refs.bgImage.style.zIndex = zIndex;\n      this.$refs.bgImage.style[transform] = \"scale(\".concat(scale, \")\");\n    }\n  },\n  components: {\n    Scroll: Scroll,\n    SongList: SongList,\n    Loading: Loading\n  }\n};",{"version":3,"sources":["music-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" v-show=\"songs.length>0\" ref=\"playBtn\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <scroll\r\n      @scroll=\"scroll\"\r\n      :probe-type=\"probeType\"\r\n      :listen-scroll=\"listenScroll\"\r\n      :data=\"songs\"\r\n      class=\"list\"\r\n      ref=\"list\"\r\n    >\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :rank=\"rank\" @select=\"selectItem\" :songs=\"songs\"></song-list>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!songs.length\">\r\n        <loading></loading>\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport Scroll from 'base/scroll/scroll'\r\nimport SongList from 'base/song-list/song-list'\r\nimport Loading from 'base/loading/loading'\r\nimport { prefixStyle } from 'common/js/dom'\r\nimport { mapActions } from 'vuex'\r\nimport { playlistMixin } from 'common/js/mixin'\r\n\r\nconst RESEVED_HEIGHT = 40\r\nconst transform = prefixStyle('transform')\r\nconst backdrop = prefixStyle('backdrop-filter')\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  computed: {\r\n    bgStyle () {\r\n      return `background-image:url(${this.bgImage})`\r\n    }\r\n  },\r\n  created () {\r\n    this.probeType = 3\r\n    this.listenScroll = true\r\n  },\r\n  mounted () {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight\r\n    this.minTranslageY = -this.imageHeight + RESEVED_HEIGHT\r\n    this.$refs.list.$el.style.top = `${this.$refs.bgImage.clientHeight}px`\r\n  },\r\n  methods: {\r\n    handlePlaylist (playlist) {\r\n      const bottom = playlist.length > 0 ? '60px' : ''\r\n      this.$refs.list.$el.style.bottom = bottom\r\n      this.$refs.list.refresh()\r\n    },\r\n    scroll (pos) {\r\n      this.scrollY = pos.y\r\n    },\r\n    back () {\r\n      this.$router.back()\r\n    },\r\n    selectItem (item, index) {\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index: index\r\n      })\r\n    },\r\n    random () {\r\n      this.randomPlay({\r\n        list: this.songs\r\n      })\r\n    },\r\n    ...mapActions([\r\n      'selectPlay',\r\n      'randomPlay'\r\n    ])\r\n  },\r\n  watch: {\r\n    scrollY (newY) {\r\n      let translateY = Math.max(this.minTranslageY, newY)\r\n      let zIndex = 0\r\n      let scale = 1\r\n      let blur = 0\r\n      this.$refs.layer.style[transform] = `translate3d(0, ${translateY}px, 0)`\r\n      // abs为取绝对值,该值为放大比例值\r\n      const percent = Math.abs(newY / this.imageHeight)\r\n      if (newY > 0) {\r\n        scale = 1 + percent\r\n        zIndex = 10\r\n      } else {\r\n        blur = Math.min(20 * percent, 20)\r\n      }\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`\r\n      if (newY < this.minTranslageY) {\r\n        zIndex = 10\r\n        this.$refs.bgImage.style.height = `${RESEVED_HEIGHT}px`\r\n        this.$refs.bgImage.style.paddingTop = 0\r\n        this.$refs.playBtn.style.display = 'none'\r\n      } else {\r\n        this.$refs.bgImage.style.height = 0\r\n        this.$refs.bgImage.style.paddingTop = '70%'\r\n        this.$refs.playBtn.style.display = ''\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`\r\n    }\r\n  },\r\n  components: {\r\n    Scroll,\r\n    SongList,\r\n    Loading\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable'\r\n@import '~common/stylus/mixin'\r\n.music-list\r\n  position fixed\r\n  z-index 100\r\n  top 0\r\n  left 0\r\n  bottom 0\r\n  right 0\r\n  background $color-background\r\n  .back\r\n    position absolute\r\n    top 0\r\n    left 6px\r\n    z-index 50\r\n    .icon-back\r\n      display block\r\n      padding 10px\r\n      font-size $font-size-large-x\r\n      color $color-theme\r\n  .title\r\n    position absolute\r\n    top 0\r\n    left 10%\r\n    z-index 40\r\n    width 80%\r\n    no-wrap()\r\n    text-align center\r\n    line-height 40px\r\n    font-size $font-size-large\r\n    color $color-text\r\n  .bg-image\r\n    position relative\r\n    width 100%\r\n    height 0\r\n    padding-top 70%\r\n    transform-origin top\r\n    background-size cover\r\n    .play-wrapper\r\n      position absolute\r\n      bottom 20px\r\n      z-index 50\r\n      width 100%\r\n      .play\r\n        box-sizing border-box\r\n        width 135px\r\n        padding 7px 0\r\n        margin 0 auto\r\n        text-align center\r\n        border 1px solid $color-theme\r\n        color $color-theme\r\n        border-radius 100px\r\n        font-size 0\r\n        .icon-play\r\n          display inline-block\r\n          vertical-align middle\r\n          margin-right 6px\r\n          font-size $font-size-medium-x\r\n        .text\r\n          display inline-block\r\n          vertical-align middle\r\n          font-size $font-size-small\r\n    .filter\r\n      position absolute\r\n      top 0\r\n      left 0\r\n      width 100%\r\n      height 100%\r\n      background rgba(7, 17, 27, 0.4)\r\n  .bg-layer\r\n    position relative\r\n    height 100%\r\n    background $color-background\r\n  .list\r\n    position fixed\r\n    top 0\r\n    bottom 0\r\n    width 100%\r\n    background $color-background\r\n    .song-list-wrapper\r\n      padding 20px 30px\r\n    .loading-container\r\n      position absolute\r\n      width 100%\r\n      top 50%\r\n      transform translateY(-50%)\r\n</style>"],"sourceRoot":"src/components/music-list"}]}