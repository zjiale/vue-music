{"remainingRequest":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js!E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\vue-music\\src\\common\\js\\mixin.js","dependencies":[{"path":"E:\\vue-music\\src\\common\\js\\mixin.js","mtime":1571988825312},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find-index\";\nimport _defineProperty from \"E:\\\\vue-music\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\nimport { playMode } from 'common/js/config';\nimport { shuffle } from 'common/js/util'; // 用于解决底部有迷你播放器时高度不一致问题\n\nexport var playlistMixin = {\n  computed: _objectSpread({}, mapGetters(['playlist'])),\n  mounted: function mounted() {\n    this.handlePlaylist(this.playlist);\n  },\n  activated: function activated() {\n    this.handlePlaylist(this.playlist);\n  },\n  watch: {\n    playlist: function playlist(newVal) {\n      this.handlePlaylist(newVal);\n    }\n  },\n  methods: {\n    handlePlaylist: function handlePlaylist() {\n      throw new Error('component must implement handlePlaylist method');\n    }\n  }\n};\nexport var playerMixin = {\n  computed: _objectSpread({\n    iconMode: function iconMode() {\n      return this.mode === playMode.sequence ? 'icon-sequence' : this.mode === playMode.loop ? 'icon-loop' : 'icon-random';\n    }\n  }, mapGetters(['sequenceList', 'currentSong', 'playlist', 'mode', 'favoriteList'])),\n  methods: _objectSpread({\n    changeMode: function changeMode() {\n      var mode = (this.mode + 1) % 3;\n      this.setPlayMode(mode);\n      var list = null;\n\n      if (mode === playMode.random) {\n        list = shuffle(this.sequenceList);\n      } else {\n        list = this.sequenceList;\n      }\n\n      this.resetCurrentIndex(list);\n      this.setPlaylist(list);\n    },\n    resetCurrentIndex: function resetCurrentIndex(list) {\n      var _this = this;\n\n      var index = list.findIndex(function (item) {\n        return item.id === _this.currentSong.id;\n      });\n      this.setCurrentIndex(index);\n    },\n    getFavoriteIcon: function getFavoriteIcon(song) {\n      if (this.isFavorite(song)) {\n        return 'icon-favorite';\n      }\n\n      return 'icon-not-favorite';\n    },\n    toggleFavorite: function toggleFavorite(song) {\n      if (this.isFavorite(song)) {\n        this.deleteFavoriteList(song);\n      } else {\n        this.saveFavoriteList(song);\n      }\n    },\n    isFavorite: function isFavorite(song) {\n      var index = this.favoriteList.findIndex(function (item) {\n        return item.id === song.id;\n      });\n      return index > -1;\n    }\n  }, mapMutations({\n    setPlayingState: 'SET_PLAYING_STATE',\n    setCurrentIndex: 'SET_CURRENT_INDEX',\n    setPlayMode: 'SET_PLAY_MODE',\n    setPlaylist: 'SET_PLAYLIST'\n  }), {}, mapActions(['saveFavoriteList', 'deleteFavoriteList']))\n};\nexport var searchMixin = {\n  data: function data() {\n    return {\n      query: '',\n      refreshDelay: 100\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['searchHistory'])),\n  methods: _objectSpread({\n    blurInput: function blurInput() {\n      this.$refs.searchBox.blur();\n    },\n    saveSearch: function saveSearch() {\n      this.saveSearchHistory(this.query);\n    },\n    onQueryChange: function onQueryChange(query) {\n      this.query = query;\n    },\n    addQuery: function addQuery(query) {\n      this.$refs.searchBox.setQuery(query);\n    }\n  }, mapActions(['saveSearchHistory', 'deleteSearchHistory']))\n};",{"version":3,"sources":["E:\\vue-music\\src\\common\\js\\mixin.js"],"names":["mapGetters","mapMutations","mapActions","playMode","shuffle","playlistMixin","computed","mounted","handlePlaylist","playlist","activated","watch","newVal","methods","Error","playerMixin","iconMode","mode","sequence","loop","changeMode","setPlayMode","list","random","sequenceList","resetCurrentIndex","setPlaylist","index","findIndex","item","id","currentSong","setCurrentIndex","getFavoriteIcon","song","isFavorite","toggleFavorite","deleteFavoriteList","saveFavoriteList","favoriteList","setPlayingState","searchMixin","data","query","refreshDelay","blurInput","$refs","searchBox","blur","saveSearch","saveSearchHistory","onQueryChange","addQuery","setQuery"],"mappings":"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","sourcesContent":["import {\r\n  mapGetters,\r\n  mapMutations,\r\n  mapActions\r\n} from 'vuex'\r\nimport {\r\n  playMode\r\n} from 'common/js/config'\r\nimport {\r\n  shuffle\r\n} from 'common/js/util'\r\n\r\n// 用于解决底部有迷你播放器时高度不一致问题\r\nexport const playlistMixin = {\r\n  computed: {\r\n    ...mapGetters([\r\n      'playlist'\r\n    ])\r\n  },\r\n  mounted() {\r\n    this.handlePlaylist(this.playlist)\r\n  },\r\n  activated() {\r\n    this.handlePlaylist(this.playlist)\r\n  },\r\n  watch: {\r\n    playlist(newVal) {\r\n      this.handlePlaylist(newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    handlePlaylist() {\r\n      throw new Error('component must implement handlePlaylist method')\r\n    }\r\n  }\r\n}\r\n\r\nexport const playerMixin = {\r\n  computed: {\r\n    iconMode() {\r\n      return this.mode === playMode.sequence ? 'icon-sequence' : this.mode === playMode.loop ? 'icon-loop' : 'icon-random'\r\n    },\r\n    ...mapGetters([\r\n      'sequenceList',\r\n      'currentSong',\r\n      'playlist',\r\n      'mode',\r\n      'favoriteList'\r\n    ])\r\n  },\r\n  methods: {\r\n    changeMode() {\r\n      const mode = (this.mode + 1) % 3\r\n      this.setPlayMode(mode)\r\n      let list = null\r\n      if (mode === playMode.random) {\r\n        list = shuffle(this.sequenceList)\r\n      } else {\r\n        list = this.sequenceList\r\n      }\r\n      this.resetCurrentIndex(list)\r\n      this.setPlaylist(list)\r\n    },\r\n    resetCurrentIndex(list) {\r\n      let index = list.findIndex((item) => {\r\n        return item.id === this.currentSong.id\r\n      })\r\n      this.setCurrentIndex(index)\r\n    },\r\n    getFavoriteIcon(song) {\r\n      if (this.isFavorite(song)) {\r\n        return 'icon-favorite'\r\n      }\r\n      return 'icon-not-favorite'\r\n    },\r\n    toggleFavorite(song) {\r\n      if (this.isFavorite(song)) {\r\n        this.deleteFavoriteList(song)\r\n      } else {\r\n        this.saveFavoriteList(song)\r\n      }\r\n    },\r\n    isFavorite(song) {\r\n      const index = this.favoriteList.findIndex((item) => {\r\n        return item.id === song.id\r\n      })\r\n      return index > -1\r\n    },\r\n    ...mapMutations({\r\n      setPlayingState: 'SET_PLAYING_STATE',\r\n      setCurrentIndex: 'SET_CURRENT_INDEX',\r\n      setPlayMode: 'SET_PLAY_MODE',\r\n      setPlaylist: 'SET_PLAYLIST'\r\n    }),\r\n    ...mapActions([\r\n      'saveFavoriteList',\r\n      'deleteFavoriteList'\r\n    ])\r\n  }\r\n}\r\n\r\nexport const searchMixin = {\r\n  data() {\r\n    return {\r\n      query: '',\r\n      refreshDelay: 100\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'searchHistory'\r\n    ])\r\n  },\r\n  methods: {\r\n    blurInput() {\r\n      this.$refs.searchBox.blur()\r\n    },\r\n    saveSearch() {\r\n      this.saveSearchHistory(this.query)\r\n    },\r\n    onQueryChange(query) {\r\n      this.query = query\r\n    },\r\n    addQuery(query) {\r\n      this.$refs.searchBox.setQuery(query)\r\n    },\r\n    ...mapActions([\r\n      'saveSearchHistory',\r\n      'deleteSearchHistory'\r\n    ])\r\n  }\r\n}\r\n"]}]}