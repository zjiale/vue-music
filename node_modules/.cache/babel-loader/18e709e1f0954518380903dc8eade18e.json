{"remainingRequest":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js!E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\vue-music\\src\\api\\rank.js","dependencies":[{"path":"E:\\vue-music\\src\\api\\rank.js","mtime":1572341793636},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { commonParams, options } from \"./config\";\nimport axios from 'axios';\nimport { ERR_OK } from 'api/config';\nimport jsonp from 'common/js/jsonp';\nexport function getTopList() {\n  var url = '/api/getCommonInfo';\n  var data = Object.assign({}, commonParams, {\n    g_tk: 5381,\n    format: 'json',\n    platform: 'h5',\n    needNewCode: 1,\n    uin: 0\n  });\n  var commonInfo = commonData('musicToplist.ToplistInfoServer', 'GetAll', {});\n  return new Promise(function (resolve, reject) {\n    var tryTime = 3;\n\n    function request() {\n      return axios.post(url, {\n        comm: data,\n        req_0: commonInfo\n      }).then(function (response) {\n        var res = response.data;\n\n        if (res.code === ERR_OK) {\n          resolve(res);\n        } else {\n          retry();\n        }\n      });\n    }\n\n    function retry() {\n      if (--tryTime >= 0) {\n        request();\n      } else {\n        reject(new Error('Can not get the songs url'));\n      }\n    }\n\n    request();\n  });\n}\n\nfunction commonData(module, method, param) {\n  return {\n    module: module,\n    method: method,\n    param: param\n  };\n}\n\nexport function getMusicList(topid) {\n  var url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg';\n  var data = Object.assign({}, commonParams, {\n    topid: topid,\n    needNewCode: 1,\n    uin: 0,\n    tpl: 3,\n    page: 'detail',\n    type: 'top',\n    platform: 'h5'\n  });\n  return jsonp(url, data, options);\n}",{"version":3,"sources":["E:\\vue-music\\src\\api\\rank.js"],"names":["commonParams","options","axios","ERR_OK","jsonp","getTopList","url","data","Object","assign","g_tk","format","platform","needNewCode","uin","commonInfo","commonData","Promise","resolve","reject","tryTime","request","post","comm","req_0","then","response","res","code","retry","Error","module","method","param","getMusicList","topid","tpl","page","type"],"mappings":"AAAA,SACEA,YADF,EAEEC,OAFF;AAIA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,MADF,QAEO,YAFP;AAGA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,OAAO,SAASC,UAAT,GAAsB;AAC3B,MAAMC,GAAG,GAAG,oBAAZ;AAEA,MAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,YAAlB,EAAgC;AAC3CU,IAAAA,IAAI,EAAE,IADqC;AAE3CC,IAAAA,MAAM,EAAE,MAFmC;AAG3CC,IAAAA,QAAQ,EAAE,IAHiC;AAI3CC,IAAAA,WAAW,EAAE,CAJ8B;AAK3CC,IAAAA,GAAG,EAAE;AALsC,GAAhC,CAAb;AAQA,MAAMC,UAAU,GAAGC,UAAU,CAAC,gCAAD,EAAmC,QAAnC,EAA6C,EAA7C,CAA7B;AAEA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIC,OAAO,GAAG,CAAd;;AAEA,aAASC,OAAT,GAAmB;AACjB,aAAOnB,KAAK,CAACoB,IAAN,CAAWhB,GAAX,EAAgB;AACrBiB,QAAAA,IAAI,EAAEhB,IADe;AAErBiB,QAAAA,KAAK,EAAET;AAFc,OAAhB,EAGJU,IAHI,CAGC,UAACC,QAAD,EAAc;AACpB,YAAMC,GAAG,GAAGD,QAAQ,CAACnB,IAArB;;AACA,YAAIoB,GAAG,CAACC,IAAJ,KAAazB,MAAjB,EAAyB;AACvBe,UAAAA,OAAO,CAACS,GAAD,CAAP;AACD,SAFD,MAEO;AACLE,UAAAA,KAAK;AACN;AACF,OAVM,CAAP;AAWD;;AAED,aAASA,KAAT,GAAiB;AACf,UAAI,EAAET,OAAF,IAAa,CAAjB,EAAoB;AAClBC,QAAAA,OAAO;AACR,OAFD,MAEO;AACLF,QAAAA,MAAM,CAAC,IAAIW,KAAJ,CAAU,2BAAV,CAAD,CAAN;AACD;AACF;;AAEDT,IAAAA,OAAO;AACR,GA1BM,CAAP;AA2BD;;AAED,SAASL,UAAT,CAAoBe,MAApB,EAA4BC,MAA5B,EAAoCC,KAApC,EAA2C;AACzC,SAAO;AACLF,IAAAA,MAAM,EAAEA,MADH;AAELC,IAAAA,MAAM,EAAEA,MAFH;AAGLC,IAAAA,KAAK,EAAEA;AAHF,GAAP;AAKD;;AAED,OAAO,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAClC,MAAM7B,GAAG,GAAG,qDAAZ;AAEA,MAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,YAAlB,EAAgC;AAC3CmC,IAAAA,KAAK,EAALA,KAD2C;AAE3CtB,IAAAA,WAAW,EAAE,CAF8B;AAG3CC,IAAAA,GAAG,EAAE,CAHsC;AAI3CsB,IAAAA,GAAG,EAAE,CAJsC;AAK3CC,IAAAA,IAAI,EAAE,QALqC;AAM3CC,IAAAA,IAAI,EAAE,KANqC;AAO3C1B,IAAAA,QAAQ,EAAE;AAPiC,GAAhC,CAAb;AAUA,SAAOR,KAAK,CAACE,GAAD,EAAMC,IAAN,EAAYN,OAAZ,CAAZ;AACD","sourcesContent":["import {\r\n  commonParams,\r\n  options\r\n} from './config'\r\nimport axios from 'axios'\r\nimport {\r\n  ERR_OK\r\n} from 'api/config'\r\nimport jsonp from 'common/js/jsonp'\r\n\r\nexport function getTopList() {\r\n  const url = '/api/getCommonInfo'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    g_tk: 5381,\r\n    format: 'json',\r\n    platform: 'h5',\r\n    needNewCode: 1,\r\n    uin: 0\r\n  })\r\n\r\n  const commonInfo = commonData('musicToplist.ToplistInfoServer', 'GetAll', {})\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let tryTime = 3\r\n\r\n    function request() {\r\n      return axios.post(url, {\r\n        comm: data,\r\n        req_0: commonInfo\r\n      }).then((response) => {\r\n        const res = response.data\r\n        if (res.code === ERR_OK) {\r\n          resolve(res)\r\n        } else {\r\n          retry()\r\n        }\r\n      })\r\n    }\r\n\r\n    function retry() {\r\n      if (--tryTime >= 0) {\r\n        request()\r\n      } else {\r\n        reject(new Error('Can not get the songs url'))\r\n      }\r\n    }\r\n\r\n    request()\r\n  })\r\n}\r\n\r\nfunction commonData(module, method, param) {\r\n  return {\r\n    module: module,\r\n    method: method,\r\n    param: param\r\n  }\r\n}\r\n\r\nexport function getMusicList(topid) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n"]}]}