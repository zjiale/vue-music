{"remainingRequest":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js!E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-music\\src\\components\\singer\\singer.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-music\\src\\components\\singer\\singer.vue","mtime":1572576237242},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"E:\\\\vue-music\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\nimport { getSingerList } from 'api/singer';\nimport { ERR_OK } from 'api/config';\nimport Singer from 'common/js/singer';\nimport ListView from 'base/listview/listview';\nimport { mapMutations } from 'vuex';\nimport { playlistMixin } from 'common/js/mixin';\nvar HOT_NAME = '热门';\nvar HOT_SINGER_LEN = 10;\nexport default {\n  mixins: [playlistMixin],\n  data: function data() {\n    return {\n      singers: []\n    };\n  },\n  created: function created() {\n    this._getSingerList();\n  },\n  methods: _objectSpread({\n    handlePlaylist: function handlePlaylist(playlist) {\n      var bottom = playlist.length > 0 ? '60px' : 0;\n      this.$refs.singer.style.bottom = bottom;\n      this.$refs.list.refresh();\n    },\n    selectSinger: function selectSinger(singer) {\n      this.$router.push({\n        path: \"/singer/\".concat(singer.id)\n      });\n      this.setSinger(singer);\n    },\n    _getSingerList: function _getSingerList() {\n      var _this = this;\n\n      getSingerList().then(function (res) {\n        if (res.code === ERR_OK) {\n          _this.singers = _this._normalizeSinger(res.data.list);\n        }\n      });\n    },\n    _normalizeSinger: function _normalizeSinger(list) {\n      var map = {\n        hot: {\n          title: HOT_NAME,\n          items: []\n        }\n      };\n      list.forEach(function (item, index) {\n        if (index < HOT_SINGER_LEN) {\n          map.hot.items.push(new Singer({\n            id: item.Fsinger_mid,\n            name: item.Fsinger_name\n          }));\n        }\n\n        var key = item.Findex;\n\n        if (!map[key]) {\n          map[key] = {\n            title: key,\n            items: []\n          };\n        }\n\n        map[key].items.push(new Singer({\n          id: item.Fsinger_mid,\n          name: item.Fsinger_name\n        }));\n      }); // 为了得到有序列表，需要处理map\n\n      var hot = [];\n      var ret = [];\n\n      for (var key in map) {\n        var val = map[key];\n\n        if (val.title.match(/[a-zA-Z]/)) {\n          ret.push(val);\n        } else if (val.title === HOT_NAME) {\n          hot.push(val);\n        }\n      }\n\n      ret.sort(function (a, b) {\n        // charCodeAt() 方法可返回指定位置的字符的 Unicode 编码\n        // 若a大于b则a得字符往后靠些\n        return a.title.charCodeAt(0) - b.title.charCodeAt(0);\n      });\n      return hot.concat(ret);\n    }\n  }, mapMutations({\n    setSinger: 'SET_SINGER'\n  })),\n  components: {\n    ListView: ListView\n  }\n};",{"version":3,"sources":["singer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"singer\" ref=\"singer\">\r\n    <list-view @select=\"selectSinger\" :data=\"singers\" ref=\"list\"></list-view>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { getSingerList } from 'api/singer'\r\nimport { ERR_OK } from 'api/config'\r\nimport Singer from 'common/js/singer'\r\nimport ListView from 'base/listview/listview'\r\nimport { mapMutations } from 'vuex'\r\nimport { playlistMixin } from 'common/js/mixin'\r\n\r\nconst HOT_NAME = '热门'\r\nconst HOT_SINGER_LEN = 10\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  data () {\r\n    return {\r\n      singers: []\r\n    }\r\n  },\r\n  created () {\r\n    this._getSingerList()\r\n  },\r\n  methods: {\r\n    handlePlaylist (playlist) {\r\n      const bottom = playlist.length > 0 ? '60px' : 0\r\n      this.$refs.singer.style.bottom = bottom\r\n      this.$refs.list.refresh()\r\n    },\r\n    selectSinger (singer) {\r\n      this.$router.push({\r\n        path: `/singer/${singer.id}`\r\n      })\r\n      this.setSinger(singer)\r\n    },\r\n    _getSingerList () {\r\n      getSingerList().then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.singers = this._normalizeSinger(res.data.list)\r\n        }\r\n      })\r\n    },\r\n    _normalizeSinger (list) {\r\n      let map = {\r\n        hot: {\r\n          title: HOT_NAME,\r\n          items: []\r\n        }\r\n      }\r\n      list.forEach((item, index) => {\r\n        if (index < HOT_SINGER_LEN) {\r\n          map.hot.items.push(\r\n            new Singer({\r\n              id: item.Fsinger_mid,\r\n              name: item.Fsinger_name\r\n            })\r\n          )\r\n        }\r\n        const key = item.Findex\r\n        if (!map[key]) {\r\n          map[key] = {\r\n            title: key,\r\n            items: []\r\n          }\r\n        }\r\n        map[key].items.push(\r\n          new Singer({\r\n            id: item.Fsinger_mid,\r\n            name: item.Fsinger_name\r\n          })\r\n        )\r\n      })\r\n      // 为了得到有序列表，需要处理map\r\n      let hot = []\r\n      let ret = []\r\n      for (let key in map) {\r\n        let val = map[key]\r\n        if (val.title.match(/[a-zA-Z]/)) {\r\n          ret.push(val)\r\n        } else if (val.title === HOT_NAME) {\r\n          hot.push(val)\r\n        }\r\n      }\r\n      ret.sort((a, b) => {\r\n        // charCodeAt() 方法可返回指定位置的字符的 Unicode 编码\r\n        // 若a大于b则a得字符往后靠些\r\n        return a.title.charCodeAt(0) - b.title.charCodeAt(0)\r\n      })\r\n      return hot.concat(ret)\r\n    },\r\n    ...mapMutations({\r\n      setSinger: 'SET_SINGER'\r\n    })\r\n  },\r\n  components: {\r\n    ListView\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n.singer\r\n  position fixed\r\n  top 88px\r\n  bottom 0\r\n  width 100%\r\n</style>\r\n"],"sourceRoot":"src/components/singer"}]}