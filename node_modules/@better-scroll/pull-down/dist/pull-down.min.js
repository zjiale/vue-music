!function(l,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(l=l||self).PullDown=o()}(this,function(){"use strict";var e,l,o,i;(l=e||(e={}))[l.Positive=1]="Positive",l[l.Negative=-1]="Negative",l[l.Default=0]="Default",(i=o||(o={}))[i.Default=0]="Default",i[i.Throttle=1]="Throttle",i[i.Normal=2]="Normal",i[i.Realtime=3]="Realtime";var n={style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(l){return 1- --l*l*l*l}},t=[{key:"finishPullDown",name:"finish"},{key:"openPullDown",name:"open"},{key:"closePullDown",name:"close"},{key:"autoPullDownRefresh",name:"autoPull"}].map(function(l){return{key:l.key,sourceKey:"plugins.pullDownRefresh."+l.name}});function s(l){this.scroll=l,this.pulling=!1,l.options.pullDownRefresh&&this._watch(),this.scroll.registerType(["pullingDown"]),this.scroll.proxy(t)}return s.prototype._watch=function(){this.scroll.options.probeType=o.Realtime,this.scroll.scroller.hooks.on("end",this._checkPullDown,this)},s.prototype._checkPullDown=function(){if(this.scroll.options.pullDownRefresh){var l=this.scroll.options.pullDownRefresh,o=l.threshold,i=void 0===o?90:o,t=l.stop,s=void 0===t?40:t;return!(this.scroll.directionY!==e.Negative||this.scroll.y<i)&&(this.pulling||(this.pulling=!0,this.scroll.trigger("pullingDown"),this.originalMinScrollY=this.scroll.minScrollY,this.scroll.minScrollY=s),this.scroll.scrollTo(this.scroll.x,s,this.scroll.options.bounceTime,n),this.pulling)}},s.prototype.finish=function(){this.pulling=!1,this.scroll.minScrollY=this.originalMinScrollY,this.scroll.resetPosition(this.scroll.options.bounceTime,n)},s.prototype.open=function(l){void 0===l&&(l=!0),this.scroll.options.pullDownRefresh=l,this._watch()},s.prototype.close=function(){this.scroll.options.pullDownRefresh=!1},s.prototype.autoPull=function(){var l=this.scroll.options.pullDownRefresh,o=l.threshold,i=void 0===o?90:o,t=l.stop,s=void 0===t?40:t;this.pulling||(this.pulling=!0,this.originalMinScrollY=this.scroll.minScrollY,this.scroll.minScrollY=i,this.scroll.scrollTo(this.scroll.x,i),this.scroll.trigger("pullingDown"),this.scroll.scrollTo(this.scroll.x,s,this.scroll.options.bounceTime,n))},s.pluginName="pullDownRefresh",s});
