!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(t=t||self).PullUp=o()}(this,function(){"use strict";var s,t,o,i;(t=s||(s={}))[t.Positive=1]="Positive",t[t.Negative=-1]="Negative",t[t.Default=0]="Default",(i=o||(o={}))[i.Default=0]="Default",i[i.Throttle=1]="Throttle",i[i.Normal=2]="Normal",i[i.Realtime=3]="Realtime";var l=[{key:"finishPullUp",name:"finish"},{key:"openPullUp",name:"open"},{key:"closePullUp",name:"close"}].map(function(t){return{key:t.key,sourceKey:"plugins.pullUpLoad."+t.name}});function e(t){this.bscroll=t,this.watching=!1,t.options.pullUpLoad&&this._watch(),this.bscroll.registerType(["pullingUp"]),this.bscroll.proxy(l)}return e.prototype._watch=function(){this.watching||(this.bscroll.options.probeType=o.Realtime,this.watching=!0,this.bscroll.on("scroll",this._checkToEnd,this))},e.prototype._checkToEnd=function(t){var o=this;if(this.bscroll.options.pullUpLoad){var i=this.bscroll.options.pullUpLoad.threshold,l=void 0===i?0:i;this.bscroll.movingDirectionY===s.Positive&&t.y<=this.bscroll.maxScrollY+l&&(this.bscroll.once("scrollEnd",function(){o.watching=!1}),this.bscroll.trigger("pullingUp"),this.bscroll.off("scroll",this._checkToEnd))}},e.prototype.finish=function(){this.watching?this.bscroll.once("scrollEnd",this._watch,this):this._watch()},e.prototype.open=function(t){void 0===t&&(t=!0),this.bscroll.options.pullUpLoad=t,this._watch()},e.prototype.close=function(){this.bscroll.options.pullUpLoad=!1,this.watching&&(this.watching=!1,this.bscroll.off("scroll",this._checkToEnd))},e.pluginName="pullUpLoad",e});
